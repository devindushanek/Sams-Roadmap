@import "tailwindcss";
@custom-variant dark (&:where([data-theme=dark], [data-theme=dark] *));

/* ===== THEME TOKENS ===== */
@theme {
    /* Light theme base */
    --color-neumorphic-bg: #f0f2f5;
    --color-neumorphic-bg-dark: #1a1a2e;

    /* Light shadows */
    --shadow-neu-flat: 8px 8px 16px #d1d9e6, -8px -8px 16px #ffffff;
    --shadow-neu-flat-sm: 4px 4px 8px #d1d9e6, -4px -4px 8px #ffffff;
    --shadow-neu-pressed: inset 5px 5px 10px #d1d9e6, inset -5px -5px 10px #ffffff;
    --shadow-neu-pressed-sm: inset 2px 2px 4px #d1d9e6, inset -2px -2px 4px #ffffff;

    /* Dark shadows - pressed shadows use only dark color for proper indent without glow */
    --shadow-neu-dark-flat: 8px 8px 16px #0f0f1a, -8px -8px 16px #252542;
    --shadow-neu-dark-flat-sm: 4px 4px 8px #0f0f1a, -4px -4px 8px #252542;
    --shadow-neu-dark-pressed: inset 4px 4px 8px #0a0a15, inset -2px -2px 4px #0f0f1a;
    --shadow-neu-dark-pressed-sm: inset 2px 2px 4px #0a0a15, inset -1px -1px 2px #0f0f1a;
}

/* ===== THEME TRANSITION SYSTEM ===== */
/* Global transition for smooth theme changes */
:root {
    --theme-transition-duration: 0.4s;
    --theme-transition-timing: cubic-bezier(0.4, 0, 0.2, 1);
}

/* Apply smooth transitions to all themeable properties */
*,
*::before,
*::after {
    transition-property: background-color, border-color, color, box-shadow, opacity;
    transition-duration: var(--theme-transition-duration);
    transition-timing-function: var(--theme-transition-timing);
}

/* Exclude animations and transforms from theme transition to prevent conflicts */
.animate-spin,
.animate-pulse,
.animate-bounce,
.animate-flash-blue,
[class*="animate-"],
[class*="hover:scale"],
[class*="active:scale"] {
    transition-property: background-color, border-color, color, box-shadow, opacity, transform;
}

@layer base {
    body {
        @apply bg-neumorphic-bg text-slate-600 antialiased;
        font-family: 'Inter', system-ui, sans-serif;
    }

    body[data-theme="dark"] {
        @apply bg-neumorphic-bg-dark text-slate-300;
    }

    /* Custom Scrollbar - Light */
    ::-webkit-scrollbar {
        width: 10px;
        height: 10px;
    }

    ::-webkit-scrollbar-track {
        background: transparent;
    }

    ::-webkit-scrollbar-thumb {
        background: #d1d9e6;
        border-radius: 10px;
        border: 2px solid #f0f2f5;
    }

    ::-webkit-scrollbar-thumb:hover {
        background: #c2cbd9;
    }

    /* Custom Scrollbar - Dark */
    [data-theme="dark"] ::-webkit-scrollbar-thumb {
        background: #2a2a4a;
        border: 2px solid #1a1a2e;
    }

    [data-theme="dark"] ::-webkit-scrollbar-thumb:hover {
        background: #3a3a5a;
    }
}

/* ===== NEUMORPHIC UTILITIES - LIGHT ===== */
.neu-flat {
    @apply shadow-neu-flat rounded-[32px] bg-neumorphic-bg;
}

.neu-flat-sm {
    @apply shadow-neu-flat-sm rounded-[20px] bg-neumorphic-bg;
}

.neu-pressed {
    @apply shadow-neu-pressed rounded-[32px] bg-neumorphic-bg;
}

.neu-pressed-sm {
    @apply shadow-neu-pressed-sm rounded-[20px] bg-neumorphic-bg;
}

/* ===== NEUMORPHIC UTILITIES - DARK ===== */
[data-theme="dark"] .neu-flat {
    @apply shadow-neu-dark-flat bg-neumorphic-bg-dark;
}

[data-theme="dark"] .neu-flat-sm {
    @apply shadow-neu-dark-flat-sm bg-neumorphic-bg-dark;
}

[data-theme="dark"] .neu-pressed {
    @apply shadow-neu-dark-pressed bg-neumorphic-bg-dark;
}

[data-theme="dark"] .neu-pressed-sm {
    @apply shadow-neu-dark-pressed-sm bg-neumorphic-bg-dark;
}

/* ===== DARK MODE OVERRIDE FOR INLINE SHADOW CLASSES ===== */
/* This catches elements using shadow-neu-pressed-sm directly, not through utility class */
[data-theme="dark"] .shadow-neu-pressed-sm {
    box-shadow: inset 2px 2px 4px #0a0a15, inset -1px -1px 2px #0f0f1a !important;
}

[data-theme="dark"] .shadow-neu-pressed {
    box-shadow: inset 4px 4px 8px #0a0a15, inset -2px -2px 4px #0f0f1a !important;
}

/* ===== GHOST BUTTONS ===== */
.neu-ghost {
    @apply p-3 md:p-2 rounded-full hover:bg-white/50 hover:shadow-neu-flat-sm active:shadow-neu-pressed-sm text-indigo-600;
}

[data-theme="dark"] .neu-ghost {
    @apply hover:bg-white/10 hover:shadow-neu-dark-flat-sm text-indigo-400;
}

[data-theme="dark"] .neu-ghost:active {
    box-shadow: inset 2px 2px 4px #0a0a15, inset -1px -1px 2px #0f0f1a !important;
}

/* Icon ghost style */
.neu-icon-ghost {
    @apply p-3 md:p-2 rounded-xl text-slate-400 hover:text-indigo-600;
}

[data-theme="dark"] .neu-icon-ghost {
    @apply text-slate-500 hover:text-indigo-400;
}

.neu-icon-ghost-rose {
    @apply p-3 md:p-2 rounded-xl text-slate-400 hover:text-rose-500;
}

[data-theme="dark"] .neu-icon-ghost-rose {
    @apply text-slate-500 hover:text-rose-400;
}

/* ===== HOVER STATES ===== */
.neu-button-hover:hover {
    @apply shadow-neu-pressed-sm scale-[0.98];
}

[data-theme="dark"] .neu-button-hover:hover {
    box-shadow: inset 2px 2px 4px #0a0a15, inset -1px -1px 2px #0f0f1a !important;
}

.neu-card-hover:hover {
    @apply shadow-neu-pressed-sm scale-[0.99];
}

[data-theme="dark"] .neu-card-hover:hover {
    box-shadow: inset 2px 2px 4px #0a0a15, inset -1px -1px 2px #0f0f1a !important;
}

/* ===== BACK BUTTON ===== */
.neu-back-btn:hover {
    box-shadow: inset 3px 3px 6px #d1d9e6, inset -3px -3px 6px #ffffff !important;
    transform: scale(0.98);
}

[data-theme="dark"] .neu-back-btn:hover {
    box-shadow: inset 3px 3px 6px #0a0a15, inset -1px -1px 3px #0f0f1a !important;
}

/* ===== CREATE PALETTE BUTTON ===== */
.create-palette-btn {
    box-shadow: 5px 5px 10px rgba(55, 48, 163, 0.4), -5px -5px 10px rgba(129, 140, 248, 0.4);
}

.create-palette-btn:hover {
    box-shadow: inset 5px 5px 10px rgba(55, 48, 163, 0.4), inset -5px -5px 10px rgba(129, 140, 248, 0.4);
}

/* Dark mode create button - no outer glow */
[data-theme="dark"] .create-palette-btn {
    box-shadow: 4px 4px 8px #0f0f1a, -4px -4px 8px #252542;
}

[data-theme="dark"] .create-palette-btn:hover {
    box-shadow: inset 4px 4px 8px #0a0a15, inset -2px -2px 4px #0f0f1a !important;
}

/* ===== UTILITY CLASSES ===== */
.line-clamp-2 {
    display: -webkit-box;
    -webkit-line-clamp: 2;
    line-clamp: 2;
    -webkit-box-orient: vertical;
    overflow: hidden;
}

/* ===== ANIMATIONS ===== */
@keyframes flash-blue {
    0% {
        outline: 0px solid rgba(59, 130, 246, 0);
        outline-offset: 0px;
    }

    50% {
        outline: 4px solid rgba(59, 130, 246, 0.5);
        outline-offset: 4px;
    }

    100% {
        outline: 0px solid rgba(59, 130, 246, 0);
        outline-offset: 0px;
    }
}

.animate-flash-blue {
    animation: flash-blue 1.5s ease-in-out;
}

/* ===== DARK THEME TEXT OVERRIDES ===== */
[data-theme="dark"] .text-slate-800 {
    @apply text-slate-100;
}

[data-theme="dark"] .text-slate-700 {
    @apply text-slate-200;
}

[data-theme="dark"] .text-slate-600 {
    @apply text-slate-300;
}

[data-theme="dark"] .text-slate-500 {
    @apply text-slate-400;
}

[data-theme="dark"] .text-slate-900 {
    @apply text-slate-100;
}

/* ===== DARK THEME BORDER OVERRIDES ===== */
[data-theme="dark"] .border-white\/20 {
    border-color: rgba(255, 255, 255, 0.1);
}

[data-theme="dark"] .border-slate-200 {
    border-color: rgba(255, 255, 255, 0.1);
}

/* ===== DARK THEME BACKGROUND OVERRIDES ===== */
[data-theme="dark"] .bg-neumorphic-bg {
    @apply bg-neumorphic-bg-dark;
}

[data-theme="dark"] .bg-neumorphic-bg\/80 {
    background-color: rgba(26, 26, 46, 0.8);
}

[data-theme="dark"] .bg-white {
    background-color: #252542;
}

[data-theme="dark"] .bg-white\/50 {
    background-color: rgba(37, 37, 66, 0.5);
}

[data-theme="dark"] .hover\:bg-white\/50:hover {
    background-color: rgba(37, 37, 66, 0.5);
}

[data-theme="dark"] .bg-slate-100 {
    background-color: #252542;
}

/* ===== THEME TOGGLE BUTTON ===== */
.theme-toggle {
    @apply relative w-14 h-8 rounded-full cursor-pointer;
    background: linear-gradient(145deg, #d1d9e6, #ffffff);
    box-shadow: 4px 4px 8px #d1d9e6, -4px -4px 8px #ffffff;
}

[data-theme="dark"] .theme-toggle {
    background: linear-gradient(145deg, #0f0f1a, #252542);
    box-shadow: 4px 4px 8px #0f0f1a, -4px -4px 8px #252542;
}

.theme-toggle-knob {
    @apply absolute top-1 left-1 w-6 h-6 rounded-full flex items-center justify-center;
    background: linear-gradient(145deg, #ffffff, #e6e6e6);
    box-shadow: 2px 2px 4px #d1d9e6;
}

[data-theme="dark"] .theme-toggle-knob {
    @apply left-7;
    background: linear-gradient(145deg, #252542, #1a1a2e);
    box-shadow: 2px 2px 4px #0f0f1a;
}

/* ===== DARK INPUT STYLES ===== */
[data-theme="dark"] input[type="text"],
[data-theme="dark"] input[type="color"],
[data-theme="dark"] textarea {
    @apply bg-neumorphic-bg-dark text-slate-200 border-slate-600;
}

[data-theme="dark"] input::placeholder,
[data-theme="dark"] textarea::placeholder {
    @apply text-slate-500;
}

/* ===== PREVENT TRANSITION ON INITIAL LOAD ===== */
/* This prevents the flash of transition on page load */
.no-transition,
.no-transition * {
    transition: none !important;
}

/* ===== MOCKUP SHUFFLE BUTTON ===== */
/* Light mode: white frosted glass (original style) */
.mockup-shuffle-btn {
    @apply p-3 rounded-full backdrop-blur-xl shadow-lg;
    background-color: rgba(255, 255, 255, 0.8);
    color: #475569;
}

.mockup-shuffle-btn:hover {
    background-color: rgba(255, 255, 255, 1);
    color: #4f46e5;
    transform: scale(1.05);
}

/* Dark mode: dark frosted glass */
[data-theme="dark"] .mockup-shuffle-btn {
    background-color: rgba(0, 0, 0, 0.2);
    color: rgba(255, 255, 255, 0.8);
    box-shadow: 0 1px 3px 0 rgba(0, 0, 0, 0.1);
}

[data-theme="dark"] .mockup-shuffle-btn:hover {
    background-color: rgba(0, 0, 0, 0.3);
    color: rgba(255, 255, 255, 1);
}

/* Scrollbar fix */
.scrollbar-constrained::-webkit-scrollbar-track {
    margin-inline: calc((100vw - min(100vw, 72rem)) / 2 + 2rem);
}

@media (min-width: 768px) {
    .scrollbar-constrained::-webkit-scrollbar-track {
        margin-inline: calc((100vw - min(100vw, 72rem)) / 2 + 4rem);
    }
}

/* ===== UTILITIES ===== */
.no-scrollbar::-webkit-scrollbar {
    display: none;
}

.no-scrollbar {
    -ms-overflow-style: none;
    scrollbar-width: none;
}

/* ===== NEUMORPHIC PRESSED - COLORED BUTTONS ===== */
.neu-pressed-rose:active {
    box-shadow: inset 4px 4px 8px rgba(159, 18, 57, 0.4), inset -2px -2px 4px rgba(255, 255, 255, 0.1) !important;
}

[data-theme="dark"] .neu-pressed-rose:active {
    box-shadow: inset 4px 4px 8px rgba(0, 0, 0, 0.5), inset -1px -1px 2px rgba(255, 255, 255, 0.05) !important;
}